"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class LoginController {
    async showLoginForm({ view }) {
        return view.render('auth/login');
    }
    async login({ request, response, auth, session }) {
        const { email, password } = request.only(['email', 'password']);
        try {
            let au = await auth.use("web").attempt(email, password);
            console.log(au);
            return response.redirect('/dashboard');
        }
        catch (error) {
            session.flash('form', 'Your username, email, or password is incorrect');
            return response.redirect().back();
        }
    }
    async logout({ response, auth }) {
        await auth.logout();
        return response.redirect().toRoute('auth.login.show');
    }
}
exports.default = LoginController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9naW5Db250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiTG9naW5Db250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBS0EsTUFBcUIsZUFBZTtJQUNsQyxLQUFLLENBQUMsYUFBYSxDQUFDLEVBQUUsSUFBSSxFQUFFO1FBQzFCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0lBRU0sS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBdUI7UUFFMUUsTUFBTSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUE7UUFDL0QsSUFBSTtZQUVILElBQUksRUFBRSxHQUFFLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFBO1lBQ3JELE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUE7WUFFZixPQUFPLFFBQVEsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUE7U0FDdkM7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUVkLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLGdEQUFnRCxDQUFDLENBQUE7WUFDdkUsT0FBTyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUE7U0FDbEM7SUFFSCxDQUFDO0lBQ00sS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQXVCO1FBRXpELE1BQU0sSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFBO1FBRW5CLE9BQU8sUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFBO0lBQ3ZELENBQUM7Q0FDRjtBQTNCRCxrQ0EyQkMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgdHlwZSB7IEh0dHBDb250ZXh0Q29udHJhY3QgfSBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0h0dHBDb250ZXh0J1xuXG5cbmltcG9ydCB7SHR0cENvbnRleHRDb250cmFjdH0gZnJvbSBcIkBpb2M6QWRvbmlzL0NvcmUvSHR0cENvbnRleHRcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naW5Db250cm9sbGVyIHtcbiAgYXN5bmMgc2hvd0xvZ2luRm9ybSh7IHZpZXcgfSkge1xuICAgIHJldHVybiB2aWV3LnJlbmRlcignYXV0aC9sb2dpbicpXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgbG9naW4oeyByZXF1ZXN0LCByZXNwb25zZSwgYXV0aCwgc2Vzc2lvbiB9OiBIdHRwQ29udGV4dENvbnRyYWN0KSB7XG4gICAgLy8gZ3JhYiB1aWQgYW5kIHBhc3N3b3JkIHZhbHVlcyBvZmYgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcXVlc3Qub25seShbJ2VtYWlsJywgJ3Bhc3N3b3JkJ10pXG4gICAgdHJ5IHtcbiAgICAgIC8vIGF0dGVtcHQgdG8gbG9naW5cbiAgICAgbGV0IGF1PSBhd2FpdCBhdXRoLnVzZShcIndlYlwiKS5hdHRlbXB0KGVtYWlsLCBwYXNzd29yZClcbiAgICAgIGNvbnNvbGUubG9nKGF1KVxuICAgICAgLy8gb3RoZXJ3aXNlLCByZWRpcmVjdCB0byBob21lIHBhZ2VcbiAgICAgIHJldHVybiByZXNwb25zZS5yZWRpcmVjdCgnL2Rhc2hib2FyZCcpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIGlmIGxvZ2luIGZhaWxzLCByZXR1cm4gdmFndWUgZm9ybSBtZXNzYWdlIGFuZCByZWRpcmVjdCBiYWNrXG4gICAgICBzZXNzaW9uLmZsYXNoKCdmb3JtJywgJ1lvdXIgdXNlcm5hbWUsIGVtYWlsLCBvciBwYXNzd29yZCBpcyBpbmNvcnJlY3QnKVxuICAgICAgcmV0dXJuIHJlc3BvbnNlLnJlZGlyZWN0KCkuYmFjaygpXG4gICAgfVxuXG4gIH1cbiAgcHVibGljIGFzeW5jIGxvZ291dCh7IHJlc3BvbnNlLCBhdXRoIH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICAvLyBsb2dvdXQgdGhlIHVzZXJcbiAgICBhd2FpdCBhdXRoLmxvZ291dCgpXG4gICAgLy8gcmVkaXJlY3QgdG8gbG9naW4gcGFnZVxuICAgIHJldHVybiByZXNwb25zZS5yZWRpcmVjdCgpLnRvUm91dGUoJ2F1dGgubG9naW4uc2hvdycpXG4gIH1cbn1cbiJdfQ==